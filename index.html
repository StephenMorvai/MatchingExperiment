<!DOCTYPE html>
<html>

<body onload = "run();">

	<div id = gameArea>
		<div id = box>
			
		</div>
		<h3 id = score>Score: 0</h3>
	</div>

</body>

</html>

<style>
*{
	position:absolute;
}


#gameArea{

	width:800px;
	height:600px;
	
	margin-Left:0px;
	margin-Top:0px;
	
	background-color: #25f777;

}

#box{
	width:550px;
	height:550px;
	
	margin-Left:125px;
	margin-Top:25px;
	
	background-color: #25f711;
}


</style>

<script>

var moveDiv = function(elem,x,y){
	elem.style.marginLeft = x + "px";
	elem.style.marginTop = y + "px";
}
var displayDiv = function(elem){
	elem.style.display = "block";
}
var hideDiv = function(elem){
	elem.style.display = "none";
}

var createDiv = function(id,w,h,x,y,col){
	document.body.appendChild(id);
	id.style.position = "absolute";
	id.style.width = w + "px";
	id.style.height = h + "px";
	id.style.marginLeft = x + "px";
	id.style.marginTop = y + "px";
	id.style.backgroundColor = col;
}

var findLinks = function(tiles,size,goal,score){
	for( var i = 0; i <= size - goal; i++){
		for( var j = 0; j <= size - goal ; j++){
			
			var cond = true;
			for(var k = 1; k < goal; k++){
				if(tiles[i*size + j].innerHTML != tiles[(i+k)*size + j].innerHTML){
					cond = false;
				}
			}
			if(cond){
				for(var k = 0; k < goal; k++){
					tiles[(i+k)*size + j].style.backgroundColor = "#FF2222";
				}
				score++;
			}
			
			cond = true;
			for(var k = 1; k < goal; k++){
				if(tiles[i*size + j].innerHTML != tiles[i*size + j + k].innerHTML){
					cond = false;
				}
			}
			if(cond){
				for(var k = 0; k < goal; k++){
					tiles[i*size + j + k].style.backgroundColor = "#FF2222";
				}
				score++;
			}
			
		}
	}
	return score;
}


var run = function(){

	var size = 10;
	var goal = 3;
	var jewels = 9;
	var tiles = [];
	var score = 0;

	for( var i = 0; i < size; i++){
		for( var j = 0; j < size; j++){
			tiles[i*size + j] = document.createElement("div");
			createDiv(tiles[i*size + j], 500/size ,500/size,(500/size)*j + 150,(500/size)*i + 50,"#00DA55");
			displayDiv(tiles[i*size+j]);
			tiles[i*size + j].style.border = "2px solid";
			tiles[i*size + j].innerHTML  = Math.floor(Math.random() * jewels);
			tiles[i*size + j].style.textAlign = "center";
			tiles[i*size + j].style.lineHeight = 500/size + "px";
		}
	}

		document.getElementById("score").innerHTML = "Score: " + findLinks(tiles,size,goal,score);




}


</script>